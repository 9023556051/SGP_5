<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Medical Report Preview</title>
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <style>
        body { font-family: Inter, sans-serif; background: #f4f6fb; color:#222; padding:24px; }
        .report { max-width:900px; margin:16px auto; background:#fff; padding:24px; border-radius:10px; box-shadow:0 8px 30px rgba(20,30,60,0.08); }
        .header { display:flex; justify-content:space-between; align-items:center; }
        .clinic { color:#1f4ea6; font-weight:700; font-size:18px; }
        .title { text-align:center; color:#6b3aa8; font-weight:700; margin-top:6px; }
        .patient-box { background:#f7f9ff; padding:12px; border-radius:8px; margin-top:12px; }
        .section { margin-top:18px; }
        .grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
        .param { display:flex; justify-content:space-between; padding:6px 8px; border-bottom:1px solid #eef2ff; }
        .btn-row { display:flex; gap:10px; margin-top:18px; justify-content:center; }
        .btn { background:#3b82f6; color:#fff; padding:10px 16px; border-radius:8px; text-decoration:none; }
        .btn.alt { background:#fff; color:#333; border:1px solid #e6e9f4; }
        @media (max-width:720px){ .grid{grid-template-columns:1fr;} .patient-box{font-size:14px} }
    </style>
    </head>
<body>
    <div class="report">
        <div class="header">
            <div>
                <div class="clinic">Sunrise Women's Health Clinic</div>
                <div style="font-size:12px;color:#555">Comprehensive Gynecology & Endocrinology Services</div>
            </div>
            <div style="text-align:right">
                <div style="font-size:12px;color:#666">Date: {{ now }}</div>
                <div style="font-size:12px;color:#666">Doctor: Dr. Olivia Greene</div>
            </div>
        </div>

        <h2 class="title">Medical Consultation Report</h2>

        <div class="patient-box">
            <strong>Patient:</strong> {{ input_values.get('Full Name','N/A') }} &nbsp; &nbsp;
            <strong>Age:</strong> {{ input_values.get('Age','N/A') }} yrs<br>
            <strong>Phone:</strong> {{ input_values.get('Phone','N/A') }} &nbsp; &nbsp; <strong>Email:</strong> {{ input_values.get('Email','N/A') }}
        </div>

        <div class="section">
            <h3 style="margin-bottom:6px;color:#2b5aa6">Clinical Assessment</h3>
            <div style="color:#333">The patient presented for PCOS risk assessment. Documented clinical parameters and lab values are shown below.</div>
        </div>

        <div class="section">
            <h3 style="margin-bottom:6px;color:#667eea">Measured Parameters</h3>
            <div class="grid">
                {% set labels = [
                    ('Weight (kg)','Weight'), ('Height (cm)','Height'), ('BMI','BMI'), ('Pulse Rate (bpm)','PulseRate'),
                    ('Respiration Rate','RR'), ('Systolic BP','BP_systolic'), ('Diastolic BP','BP_diastolic'),
                    ('Follicle Count','Follicle_count'), ('FSH (mlU/ml)','FSH'), ('LH (mlU/ml)','LH'),
                    ('FSH:LH Ratio','FSH_LH_ratio'), ('TSH (Î¼IU/ml)','TSH'), ('AMH (pmol/L)','AMH'),
                    ('PRL (ng/ml)','PRL'), ('Vitamin D3 (ng/ml)','VitD3'), ('Progesterone (ng/ml)','PRG'),
                    ('Waist:Hip Ratio','W_H_ratio'), ('Random Blood Sugar (mg/dl)','RBS')
                ] %}
                {% for label_text,key in labels %}
                <div class="param"><div>{{ label_text }}</div><div style="font-weight:600">{{ input_values.get(label_text) or input_values.get(key) or 'N/A' }}</div></div>
                {% endfor %}
            </div>
        </div>

        <div class="section">
            <h3 style="margin-bottom:6px;color:#2b5aa6">Diagnosis</h3>
            <div style="font-weight:700;color:{{ 'red' if result=='PCOS Positive' else '#2b8f3e' }}">{{ result }}</div>
        </div>

        <div class="section">
            <h3 style="margin-bottom:6px;color:#2b5aa6">Recommendations</h3>
            <ul>
                {% if result == 'PCOS Positive' %}
                    <li>Refer to specialist (Gynecologist/Endocrinologist)</li>
                    <li>Lifestyle modification: diet, exercise, weight management</li>
                    <li>Consider hormonal evaluation & tailored treatment plan</li>
                    <li>Monitor blood glucose and lipid profile</li>
                {% else %}
                    <li>Maintain healthy lifestyle and routine follow-up</li>
                    <li>Repeat evaluation if symptoms persist</li>
                    <li>Routine screening for metabolic risk factors</li>
                {% endif %}
            </ul>
        </div>

        <div class="btn-row">
            <a class="btn" href="{{ url_for('download_medical_report') }}">Download PDF</a>
            <a class="btn alt" href="{{ url_for('home') }}">Back to Form</a>
        </div>
    </div>
</body>
</html>
